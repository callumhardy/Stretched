"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}),function($,t,e,i){$window=$(t);var n=$window.innerWidth(),a=$window.innerHeight(),r={backgroundSize:"cover",imageSelector:"img",alignX:"center",alignY:"center",stretcher:{padding:0},container:{padding:0},breakpoints:{},before:function(t){},after:function(t){}};$.fn.stretched=function(t){var e=$.extend({},r,t);return $containers=$(this),$containers.length>0&&$containers.each(function(){if($container=$(this),$images=$container.find(e.imageSelector),!($images.length<1)){var t={container:{},stretcher:{},image:{}};t.container.$=$container,$stretcher=$("<div>").addClass("stretcher"),$container.append($stretcher),t.stretcher.$=$stretcher,$images.each(function(){$image=$(this);var i=$image.attr("src");if($image.css({width:"auto",height:"auto",maxWidth:"none",maxHeight:"none",visibility:"hidden",position:"absolute"}),$stretcher.append($image),$image.attr("src",i),0===$image.width())$image.load(function(){t.image.$=$(this),t.image.naturalWidth=t.image.$.attr("width")||t.image.$.width(),t.image.naturalHeight=t.image.$.attr("height")||t.image.$.height(),t.image.ratio=t.image.naturalWidth/t.image.naturalHeight;var i=Object.create(g);i.init(e,t)});else{t.image.$=$(this),t.image.naturalWidth=t.image.$.attr("width")||t.image.$.width(),t.image.naturalHeight=t.image.$.attr("height")||t.image.$.height(),t.image.ratio=t.image.naturalWidth/t.image.naturalHeight;var n=Object.create(g);n.init(e,t)}})}}),$containers};var g={init:function(t,e){var i=this;i.config=t,i.originalConfig=t,i.elements=e,i.runStretch(),i.bindEvents()},runStretch:function(){var t=this,e=t.elements,i=t.config,n=!1,a=$window.innerWidth(),r=999999;$container=e.container.$,$stretcher=e.stretcher.$,$image=e.image.$,i.before(e),Object.keys(i.breakpoints).length>0&&$.each(i.breakpoints,function(t,e){t=parseInt(t,10),t>a&&r>t&&(r=t,i=$.extend({},i,e))}),$container.attr("style",""),"auto"===$container.css("z-index")&&$container.css({zIndex:0}),$stretcher.css({zIndex:-1,overflow:"hidden",maxWidth:"",maxHeight:"",width:"auto",height:"auto"}),t.calculatePadding(e.stretcher,i.container.padding),t.stretchToFill(e.stretcher,e.container),"cover"===i.backgroundSize?(t.calculatePadding(e.image,0),t.stretchToCover(e.image,e.stretcher),t.imageAlignment()):(t.calculatePadding(e.image,i.stretcher.padding),t.stretchToContain(e.image,e.stretcher)),$image.css({visibility:"visible"}),"object"==typeof i.container&&$.each(i.container,function(t,e){"padding"!==t&&$container.css(t,e)}),"object"==typeof i.stretcher&&$.each(i.stretcher,function(t,e){"padding"!==t&&$stretcher.css(t,e)}),i.after(e)},bindEvents:function(){var t=this,e;return $window.resize(function(){clearTimeout(e),e=setTimeout(function(){t.runStretch()},50)}),$window.on("focus",function(){t.runStretch()}),t.elements.container.$.on("stretch",function(){t.runStretch()}),t},calculatePadding:function(t,e){var i=this;if($elem=t.$,$parent=$elem.parent(),t.padding={},e){"string"!=typeof e&&(e=e.toString());var n=e.split(" ");$.each(n,function(e,i){-1!==i.indexOf("%")?(i=parseFloat(i)/100,0===e?(t.padding.top=t.padding.bottom=$parent.height()*i,t.padding.right=t.padding.left=$parent.width()*i):1===e?t.padding.right=t.padding.left=$parent.width()*i:2===e?t.padding.bottom=$parent.height()*i:3===e&&(t.padding.left=$parent.width()*i)):(i=parseFloat(i),0===e?t.padding.top=t.padding.bottom=t.padding.right=t.padding.left=i:1===e?t.padding.right=t.padding.left=i:2===e?t.padding.bottom=i:3===e&&(t.padding.left=i))})}else t.padding.top=t.padding.right=t.padding.bottom=t.padding.left=0;return i},imageAlignment:function(){var t=this,e=t.elements,i=t.config;$container=e.container.$,$stretcher=e.stretcher.$,$image=e.image.$,"left"===i.alignX?$image.css({left:0,right:"",marginLeft:0}):"right"===i.alignX&&$image.css({left:"",right:0,marginLeft:0}),"top"===i.alignY?$image.css({top:0,bottom:"",marginTop:0}):"bottom"===i.alignY&&$image.css({top:"",bottom:0,marginTop:0})},stretchToContain:function(t,e){var i=this;$elem=t.$,$targetElem=e.$,e.ratio=$targetElem.width()/$targetElem.height(),e.innerWidth=e.$.innerWidth()-t.padding.right-t.padding.left,e.innerHeight=e.$.innerHeight()-t.padding.top-t.padding.bottom,e.innerRatio=e.innerWidth/e.innerHeight,t.ratio>e.innerRatio?(t.width=t.naturalWidth>e.innerWidth?e.innerWidth:t.naturalWidth,t.height=Math.ceil(t.width/t.ratio)):(t.height=t.naturalHeight>e.innerHeight?e.innerHeight:t.naturalHeight,t.width=Math.ceil(t.height*t.ratio)),t.marginLeft=-t.width/2+(t.padding.left/2-t.padding.right/2),t.marginTop=-t.height/2+(t.padding.top/2-t.padding.bottom/2),$elem.css({position:"absolute",top:"50%",left:"50%",marginLeft:t.marginLeft,marginTop:t.marginTop,width:t.width,height:t.height,maxWidth:"none",maxHeight:"none"})},stretchToCover:function(t,e){var i=this;$elem=t.$,$targetElem=e.$,e.ratio=$targetElem.width()/$targetElem.height(),t.ratio<e.ratio?(t.width=$targetElem.width()+1,t.height=Math.ceil(t.width/t.ratio)):(t.height=$targetElem.height()+1,t.width=Math.ceil(t.height*t.ratio)),t.marginLeft=-t.width/2,t.marginTop=-t.height/2,$elem.css({position:"absolute",top:"50%",left:"50%",marginLeft:t.marginLeft,marginTop:t.marginTop,width:t.width,height:t.height,maxWidth:"none",maxHeight:"none"})},stretchToFill:function(t,e){$elem=t.$,$targetElem=e.$,e.ratio=$targetElem.width()/$targetElem.height(),e.innerWidth=$targetElem.innerWidth()-t.padding.right-t.padding.left,e.innerHeight=$targetElem.innerHeight()-t.padding.top-t.padding.bottom,e.innerRatio=e.innerWidth/e.innerHeight,$elem.css({position:"absolute",top:t.padding.top,left:t.padding.left,width:e.innerWidth,height:e.innerHeight});var i=$targetElem.css("position");"absolute"!=i&&"relative"!=i&&$targetElem.css({position:"relative"})}}}(jQuery,window,document);